### í¬ì¸íŠ¸/ê²½í—˜ì¹˜/ë ˆë²¨ ì‹œìŠ¤í…œ API

### 1. í¬ì¸íŠ¸ ì¡°íšŒ
GET http://localhost:8080/api/points/me
Content-Type: application/json
Authorization: Bearer {{auth_token}}

###

### 2. í¬ì¸íŠ¸ íˆìŠ¤í† ë¦¬ ì¡°íšŒ (í˜ì´ì§•)
GET http://localhost:8080/api/points/me/history?page=0&size=10
Content-Type: application/json
Authorization: Bearer {{auth_token}}

###

### 3. ê²½í—˜ì¹˜/ë ˆë²¨ ì¡°íšŒ
GET http://localhost:8080/api/points/experience/me
Content-Type: application/json
Authorization: Bearer {{auth_token}}

###

### 4. ê²½í—˜ì¹˜ íˆìŠ¤í† ë¦¬ ì¡°íšŒ (í˜ì´ì§•)
GET http://localhost:8080/api/points/experience/me/history?page=0&size=10
Content-Type: application/json
Authorization: Bearer {{auth_token}}

###

### 5. ì¢…í•© ì§„í–‰ë„ ì¡°íšŒ (í¬ì¸íŠ¸ + ê²½í—˜ì¹˜ + ë ˆë²¨)
GET http://localhost:8080/api/points/me/progress
Content-Type: application/json
Authorization: Bearer {{auth_token}}

###

### 5-1. í¬ì¸íŠ¸ ì°¨ê° (ìƒì  êµ¬ë§¤ ë“±)
POST http://localhost:8080/api/points/me/deduct
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "points": 10,
  "reason": "ì•„ì´í…œ êµ¬ë§¤"
}

###

### ========================================
### ë³´ìƒ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
### ========================================
### ë³´ìƒ ê·œì¹™:
### - ì¸ì¦: ê²½í—˜ì¹˜ +15, í¬ì¸íŠ¸ +10
### - ëŒ“ê¸€: ê²½í—˜ì¹˜ +5, í¬ì¸íŠ¸ +2 (í–¥í›„)
### - ì¢‹ì•„ìš”: ê²½í—˜ì¹˜ +2, í¬ì¸íŠ¸ +1 (í–¥í›„)
### - ë°°ì§€ íšë“: ê²½í—˜ì¹˜ +25, í¬ì¸íŠ¸ +5 (í–¥í›„)
### - ì²« ì±Œë¦°ì§€ ì°¸ì—¬: ê²½í—˜ì¹˜ +10, í¬ì¸íŠ¸ +5 (í–¥í›„)
### - 7ì¼ ì—°ì† ì¸ì¦: ê²½í—˜ì¹˜ +20, í¬ì¸íŠ¸ +10 (í–¥í›„)
### - 30ì¼ ì—°ì† ì¸ì¦: ê²½í—˜ì¹˜ +50, í¬ì¸íŠ¸ +25 (í–¥í›„)
### ========================================

### 6. [í…ŒìŠ¤íŠ¸ ì „] í˜„ì¬ ì§„í–‰ë„ í™•ì¸
# @name beforeReward
GET http://localhost:8080/api/points/me/progress
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    client.global.set("before_exp", response.body.data.totalExperience);
    client.global.set("before_point", response.body.data.totalPoints);
    console.log("Before - EXP:", response.body.data.totalExperience, "Point:", response.body.data.totalPoints);
%}

###

### 7. [ì¸ì¦ ìƒì„±] ì±Œë¦°ì§€ ì¸ì¦í•˜ê¸° (ê²½í—˜ì¹˜ +15, í¬ì¸íŠ¸ +10 ìë™ ì§€ê¸‰)
# @name createCertification
POST http://localhost:8080/api/certifications
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "challengeId": "challenge-001",
  "title": "ì˜¤ëŠ˜ì˜ ì¸ì¦",
  "content": "ì±Œë¦°ì§€ ì¸ì¦ ì™„ë£Œ!"
}

###

### 8. [í…ŒìŠ¤íŠ¸ í›„] ë³´ìƒ ì§€ê¸‰ í™•ì¸
# @name afterReward
GET http://localhost:8080/api/points/me/progress
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    const beforeExp = client.global.get("before_exp") || 0;
    const beforePoint = client.global.get("before_point") || 0;
    const afterExp = response.body.data.totalExperience;
    const afterPoint = response.body.data.totalPoints;

    console.log("=== ë³´ìƒ ì§€ê¸‰ ê²°ê³¼ ===");
    console.log("ê²½í—˜ì¹˜: ", beforeExp, " -> ", afterExp, " (+", afterExp - beforeExp, ")");
    console.log("í¬ì¸íŠ¸: ", beforePoint, " -> ", afterPoint, " (+", afterPoint - beforePoint, ")");

    // ê²€ì¦: ì¸ì¦ ë³´ìƒ (EXP +15, Point +10)
    const expDiff = afterExp - beforeExp;
    const pointDiff = afterPoint - beforePoint;
    if (expDiff >= 15) {
        console.log("âœ… ê²½í—˜ì¹˜ ë³´ìƒ ì •ìƒ ì§€ê¸‰");
    } else {
        console.log("âŒ ê²½í—˜ì¹˜ ë³´ìƒ ì˜¤ë¥˜ (ì˜ˆìƒ: +15, ì‹¤ì œ: +", expDiff, ")");
    }
    if (pointDiff >= 10) {
        console.log("âœ… í¬ì¸íŠ¸ ë³´ìƒ ì •ìƒ ì§€ê¸‰");
    } else {
        console.log("âŒ í¬ì¸íŠ¸ ë³´ìƒ ì˜¤ë¥˜ (ì˜ˆìƒ: +10, ì‹¤ì œ: +", pointDiff, ")");
    }
%}

###

### 9. ìµœê·¼ ê²½í—˜ì¹˜ íˆìŠ¤í† ë¦¬ (ë³´ìƒ ì§€ê¸‰ í™•ì¸)
GET http://localhost:8080/api/points/experience/me/history?page=0&size=5
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== ìµœê·¼ ê²½í—˜ì¹˜ íˆìŠ¤í† ë¦¬ ===");
    if (response.body.data && response.body.data.content) {
        response.body.data.content.forEach((item, idx) => {
            console.log((idx+1) + ". " + item.reason + " (+" + item.experience + " EXP)");
        });
    }
%}

###

### 10. ìµœê·¼ í¬ì¸íŠ¸ íˆìŠ¤í† ë¦¬ (ë³´ìƒ ì§€ê¸‰ í™•ì¸)
GET http://localhost:8080/api/points/me/history?page=0&size=5
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== ìµœê·¼ í¬ì¸íŠ¸ íˆìŠ¤í† ë¦¬ ===");
    if (response.body.data && response.body.data.content) {
        response.body.data.content.forEach((item, idx) => {
            console.log((idx+1) + ". " + item.reason + " (+" + item.points + " P)");
        });
    }
%}

###

### ========================================
### í†µê³„ API (ì¼ë³„/ì£¼ë³„/ì›”ë³„)
### ========================================

### 11. í¬ì¸íŠ¸ í†µê³„ ì¡°íšŒ (ìµœê·¼ 7ì¼)
GET http://localhost:8080/api/points/me/statistics?startDate=2026-01-03&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== í¬ì¸íŠ¸ í†µê³„ (7ì¼) ===");
    if (response.body.data) {
        const summary = response.body.data.summary;
        console.log("ê¸°ê°„:", summary.periodStart, "~", summary.periodEnd);
        console.log("ì´ í¬ì¸íŠ¸ íšë“:", summary.totalPointsEarned);
        console.log("ì¼í‰ê·  í¬ì¸íŠ¸:", summary.averagePointsPerDay.toFixed(2));
        console.log("ì´ ê±°ë˜ ìˆ˜:", summary.totalTransactions);
        console.log("\nì¼ë³„ ë°ì´í„°:", response.body.data.statistics.length, "ì¼");

        response.body.data.statistics.forEach((stat, idx) => {
            if (stat.pointsEarned > 0) {
                console.log(stat.date, ":", stat.pointsEarned, "P (ëˆ„ì :", stat.cumulativePoints, "P, ê±°ë˜:", stat.transactionCount, ")");
            }
        });
    }
%}

###

### 12. ê²½í—˜ì¹˜ í†µê³„ ì¡°íšŒ (ìµœê·¼ 7ì¼)
GET http://localhost:8080/api/points/experience/me/statistics?startDate=2026-01-03&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== ê²½í—˜ì¹˜ í†µê³„ (7ì¼) ===");
    if (response.body.data) {
        const summary = response.body.data.summary;
        console.log("ê¸°ê°„:", summary.periodStart, "~", summary.periodEnd);
        console.log("ì´ ê²½í—˜ì¹˜ íšë“:", summary.totalExperienceEarned);
        console.log("ì¼í‰ê·  ê²½í—˜ì¹˜:", summary.averageExperiencePerDay.toFixed(2));
        console.log("ë ˆë²¨:", summary.startLevel, "->", summary.endLevel);
        console.log("ë ˆë²¨ì—… íšŸìˆ˜:", summary.levelUpsCount);
        console.log("ì´ ê±°ë˜ ìˆ˜:", summary.totalTransactions);
        console.log("\nì¼ë³„ ë°ì´í„°:", response.body.data.statistics.length, "ì¼");

        response.body.data.statistics.forEach((stat, idx) => {
            if (stat.experienceEarned > 0 || stat.levelUpOccurred) {
                const levelUp = stat.levelUpOccurred ? " ğŸ‰ ë ˆë²¨ì—…!" : "";
                console.log(stat.date, ":", stat.experienceEarned, "EXP (ëˆ„ì :", stat.cumulativeExperience, "EXP, Lv.", stat.level, levelUp, ")");
            }
        });
    }
%}

###

### 13. í¬ì¸íŠ¸ í†µê³„ ì¡°íšŒ (ìµœê·¼ 30ì¼)
GET http://localhost:8080/api/points/me/statistics?startDate=2025-12-11&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== í¬ì¸íŠ¸ í†µê³„ (30ì¼) ===");
    if (response.body.data) {
        const summary = response.body.data.summary;
        console.log("ì´ í¬ì¸íŠ¸ íšë“:", summary.totalPointsEarned);
        console.log("ì¼í‰ê·  í¬ì¸íŠ¸:", summary.averagePointsPerDay.toFixed(2));
        console.log("ì´ ê±°ë˜ ìˆ˜:", summary.totalTransactions);
        console.log("ë°ì´í„° ìˆ˜:", response.body.data.statistics.length, "ì¼");
    }
%}

###

### 14. ê²½í—˜ì¹˜ í†µê³„ ì¡°íšŒ (ìµœê·¼ 30ì¼)
GET http://localhost:8080/api/points/experience/me/statistics?startDate=2025-12-11&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== ê²½í—˜ì¹˜ í†µê³„ (30ì¼) ===");
    if (response.body.data) {
        const summary = response.body.data.summary;
        console.log("ì´ ê²½í—˜ì¹˜ íšë“:", summary.totalExperienceEarned);
        console.log("ì¼í‰ê·  ê²½í—˜ì¹˜:", summary.averageExperiencePerDay.toFixed(2));
        console.log("ë ˆë²¨ ë³€í™”:", summary.startLevel, "->", summary.endLevel, "(+", summary.levelUpsCount, ")");
        console.log("ì´ ê±°ë˜ ìˆ˜:", summary.totalTransactions);
        console.log("ë°ì´í„° ìˆ˜:", response.body.data.statistics.length, "ì¼");
    }
%}

###

### 15. í¬ì¸íŠ¸ í†µê³„ ì¡°íšŒ (ìµœê·¼ 90ì¼)
GET http://localhost:8080/api/points/me/statistics?startDate=2025-10-11&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== í¬ì¸íŠ¸ í†µê³„ (90ì¼) ===");
    if (response.body.data) {
        const summary = response.body.data.summary;
        console.log("ì´ í¬ì¸íŠ¸ íšë“:", summary.totalPointsEarned);
        console.log("ì¼í‰ê·  í¬ì¸íŠ¸:", summary.averagePointsPerDay.toFixed(2));
        console.log("ì´ ê±°ë˜ ìˆ˜:", summary.totalTransactions);
    }
%}

###

### 16. ê²½í—˜ì¹˜ í†µê³„ ì¡°íšŒ (ìµœê·¼ 90ì¼)
GET http://localhost:8080/api/points/experience/me/statistics?startDate=2025-10-11&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== ê²½í—˜ì¹˜ í†µê³„ (90ì¼) ===");
    if (response.body.data) {
        const summary = response.body.data.summary;
        console.log("ì´ ê²½í—˜ì¹˜ íšë“:", summary.totalExperienceEarned);
        console.log("ì¼í‰ê·  ê²½í—˜ì¹˜:", summary.averageExperiencePerDay.toFixed(2));
        console.log("ë ˆë²¨ ë³€í™”:", summary.startLevel, "->", summary.endLevel, "(+", summary.levelUpsCount, ")");
        console.log("ì´ ê±°ë˜ ìˆ˜:", summary.totalTransactions);
    }
%}

###

### ========================================
### ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
### ========================================

### 17. [ì—ëŸ¬] ì˜ëª»ëœ ë‚ ì§œ ë²”ìœ„ (ì‹œì‘ì¼ > ì¢…ë£Œì¼)
GET http://localhost:8080/api/points/me/statistics?startDate=2026-01-09&endDate=2026-01-03
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    if (!response.body.success) {
        console.log("âŒ ì˜ˆìƒëœ ì—ëŸ¬:", response.body.error.message);
    } else {
        console.log("âš ï¸  ì—ëŸ¬ê°€ ë°œìƒí•´ì•¼ í•˜ëŠ”ë° ì„±ê³µí–ˆìŠµë‹ˆë‹¤.");
    }
%}

###

### 18. [ì—ëŸ¬] ê¸°ê°„ì´ 1ë…„ ì´ˆê³¼
GET http://localhost:8080/api/points/me/statistics?startDate=2024-01-01&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    if (!response.body.success) {
        console.log("âŒ ì˜ˆìƒëœ ì—ëŸ¬:", response.body.error.message);
    } else {
        console.log("âš ï¸  ì—ëŸ¬ê°€ ë°œìƒí•´ì•¼ í•˜ëŠ”ë° ì„±ê³µí–ˆìŠµë‹ˆë‹¤.");
    }
%}

###

### 19. [ì—ëŸ¬] ì˜ëª»ëœ ë‚ ì§œ í˜•ì‹
GET http://localhost:8080/api/points/me/statistics?startDate=2026-13-32&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    if (!response.body.success) {
        console.log("âŒ ì˜ˆìƒëœ ì—ëŸ¬ (ë‚ ì§œ íŒŒì‹±)");
    } else {
        console.log("âš ï¸  ì—ëŸ¬ê°€ ë°œìƒí•´ì•¼ í•˜ëŠ”ë° ì„±ê³µí–ˆìŠµë‹ˆë‹¤.");
    }
%}

###

### ========================================
### íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
### ========================================

### 20. ë°ì´í„°ê°€ ì—†ëŠ” ê¸°ê°„ (ë¯¸ë˜ ë‚ ì§œ)
GET http://localhost:8080/api/points/me/statistics?startDate=2027-01-01&endDate=2027-01-07
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== ë°ì´í„° ì—†ëŠ” ê¸°ê°„ (ë¯¸ë˜) ===");
    if (response.body.data) {
        const summary = response.body.data.summary;
        console.log("ì´ í¬ì¸íŠ¸:", summary.totalPointsEarned);
        console.log("ê±°ë˜ ìˆ˜:", summary.totalTransactions);
        console.log("ì¼ë³„ ë°ì´í„° ìˆ˜:", response.body.data.statistics.length);

        const allZero = response.body.data.statistics.every(s => s.pointsEarned === 0);
        if (allZero && summary.totalPointsEarned === 0) {
            console.log("âœ… ëª¨ë“  ë°ì´í„°ê°€ 0ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ë°˜í™˜ë¨");
        } else {
            console.log("âŒ ì˜ˆìƒê³¼ ë‹¤ë¥¸ ë°ì´í„°");
        }
    }
%}

###

### 21. í•˜ë£¨ë§Œ ì¡°íšŒ
GET http://localhost:8080/api/points/me/statistics?startDate=2026-01-09&endDate=2026-01-09
Content-Type: application/json
Authorization: Bearer {{auth_token}}

> {%
    console.log("=== í•˜ë£¨ë§Œ ì¡°íšŒ ===");
    if (response.body.data) {
        console.log("ë°ì´í„° ìˆ˜:", response.body.data.statistics.length);
        console.log("ì´ í¬ì¸íŠ¸:", response.body.data.summary.totalPointsEarned);
        console.log("ì¼í‰ê· :", response.body.data.summary.averagePointsPerDay);

        if (response.body.data.statistics.length === 1) {
            console.log("âœ… 1ì¼ ë°ì´í„° ì •ìƒ ë°˜í™˜");
        }
    }
%}

###
