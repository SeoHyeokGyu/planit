name: Discord Issue Notifier

on:
  # ğŸš¨ ì´ìŠˆ ê´€ë ¨ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ì´ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
  issues:
    types: [opened, reopened, closed, labeled]
  # (ì„ íƒ) PRì´ ì—´ë¦¬ê±°ë‚˜ ë‹«í ë•Œ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ë‹¤ë©´ ì¶”ê°€í•©ë‹ˆë‹¤.
  # pull_request:
  #   types: [opened, closed]
    
jobs:
  notify_discord:
    runs-on: ubuntu-latest
    
    steps:
      - name: Send Discord Issue Notification
        uses: appleboy/discord-action@master
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          
          args: |
            {
              "embeds": [
                {
                  "title": "${{ 
                    github.event.action == 'opened' && 'ğŸš¨ ìƒˆë¡œìš´ ì´ìŠˆ ë°œìƒ: #' ||
                    github.event.action == 'closed' && 'âœ… ì´ìŠˆ í•´ê²°: #' ||
                    github.event.action == 'reopened' && 'âš ï¸ ì´ìŠˆ ì¬ê°œ: #' ||
                    'ğŸ”” ì´ìŠˆ ì—…ë°ì´íŠ¸: #' 
                  }}${{ github.event.issue.number }}",
                  
                  "description": "**ì œëª©:** ${{ github.event.issue.title }}\n**ì²˜ë¦¬ì:** ${{ github.event.sender.login }}\n\n[ì´ìŠˆ ë°”ë¡œê°€ê¸°](${{ github.event.issue.html_url }})",
                  
                  "color": ${{ 
                    github.event.action == 'opened' && 16711680 || 
                    github.event.action == 'closed' && 65280 ||    
                    github.event.action == 'reopened' && 16761088 || 
                    10066329                           
                  }},
                  
                  "timestamp": "${{ github.event.issue.updated_at }}"
                }
              ]
            }
            }
