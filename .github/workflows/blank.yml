name: Discord Issue All Events

on:
  issues:
    types: [opened, edited, deleted, closed, reopened, assigned, unassigned, labeled, unlabeled, locked, unlocked, milestoned, demilestoned]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Discord Notification
        env:
          WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
        run: |
          ACTION="${{ github.event.action }}"
          ISSUE_NUM="${{ github.event.issue.number }}"
          TITLE="${{ github.event.issue.title }}"
          URL="${{ github.event.issue.html_url }}"
          USER="${{ github.event.sender.login }}"
          
          # ì•¡ì…˜ë³„ ì„¤ì •
          case $ACTION in
            "opened") EMOJI="ğŸš¨"; MSG="ìƒˆ ì´ìŠˆ"; COLOR=15158332 ;;
            "closed") EMOJI="âœ…"; MSG="ì´ìŠˆ í•´ê²°"; COLOR=3066993 ;;
            "reopened") EMOJI="ğŸ”„"; MSG="ì´ìŠˆ ì¬ê°œ"; COLOR=15105570 ;;
            "labeled") EMOJI="ğŸ·ï¸"; MSG="ë¼ë²¨ ì¶”ê°€"; COLOR=3447003 ;;
            "unlabeled") EMOJI="ğŸ·ï¸"; MSG="ë¼ë²¨ ì œê±°"; COLOR=10070709 ;;
            "assigned") EMOJI="ğŸ‘¤"; MSG="ë‹´ë‹¹ì ì§€ì •"; COLOR=5763719 ;;
            "unassigned") EMOJI="ğŸ‘¤"; MSG="ë‹´ë‹¹ì í•´ì œ"; COLOR=9807270 ;;
            "edited") EMOJI="âœï¸"; MSG="ì´ìŠˆ ìˆ˜ì •"; COLOR=16776960 ;;
            "locked") EMOJI="ğŸ”’"; MSG="ì´ìŠˆ ì ê¸ˆ"; COLOR=7506394 ;;
            "unlocked") EMOJI="ğŸ”“"; MSG="ì ê¸ˆ í•´ì œ"; COLOR=1752220 ;;
            *) EMOJI="ğŸ“Œ"; MSG="ì´ìŠˆ ì—…ë°ì´íŠ¸"; COLOR=3447003 ;;
          esac
          
          curl -X POST "$WEBHOOK_URL" \
            -H "Content-Type: application/json" \
            -d "{
              \"username\": \"GitHub Issues\",
              \"embeds\": [{
                \"title\": \"$EMOJI $MSG #$ISSUE_NUM\",
                \"description\": \"$TITLE\",
                \"url\": \"$URL\",
                \"color\": $COLOR,
                \"footer\": {
                  \"text\": \"$USER\"
                },
                \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"
              }]
            }"
