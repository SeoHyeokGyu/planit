name: Discord Issue Notifier

on:
  # ğŸš¨ ì´ìŠˆ ê´€ë ¨ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ì´ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
  issues:
    types: [opened, reopened, closed, labeled]
  # (ì„ íƒ) PRì´ ì—´ë¦¬ê±°ë‚˜ ë‹«í ë•Œ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ë‹¤ë©´ ì¶”ê°€í•©ë‹ˆë‹¤.
  # pull_request:
  #   types: [opened, closed]
    
jobs:
  notify_discord:
    # ğŸš¨ ì´ìŠˆ ì´ë²¤íŠ¸ ì „ì²´ì— ëŒ€í•´ ì‹¤í–‰ë˜ë„ë¡ if ì¡°ê±´ì„ steps ë‚´ì—ì„œ ì²˜ë¦¬
    runs-on: ubuntu-latest
    
    steps:
      - name: Send Discord Issue Notification
        # master ë¸Œëœì¹˜ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.
        uses: appleboy/discord-action@master
        with:
          # ğŸŸ¢ ì¸ì¦ ë°©ì‹ ìˆ˜ì •: ì›¹í›… URL ì „ì²´ë¥¼ Secretì— ì €ì¥í•˜ê³  ì‚¬ìš©í•©ë‹ˆë‹¤.
          webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          
          # ğŸŸ¢ ëª¨ë“  ë©”ì‹œì§€ ë‚´ìš©ì„ 'args'ë¡œ í†µí•©í•˜ì—¬ Embed JSONì„ ìƒì„±í•©ë‹ˆë‹¤.
          #    ì´ìŠˆ ì•¡ì…˜(opened, closed, reopened)ì— ë”°ë¼ ë©”ì‹œì§€ê°€ ë‹¬ë¼ì§€ë„ë¡ í•©ë‹ˆë‹¤.
          args: |
            {
              "embeds": [
                {
                  "title": "${{ 
                    # ì´ìŠˆ ìƒíƒœì— ë”°ë¥¸ ì œëª©/ì´ëª¨ì§€ ë³€ê²½
                    github.event.action == 'opened'    && 'ğŸš¨ ìƒˆë¡œìš´ ì´ìŠˆ ë°œìƒ: #' ||
                    github.event.action == 'closed'    && 'âœ… ì´ìŠˆ í•´ê²°: #' ||
                    github.event.action == 'reopened'  && 'âš ï¸ ì´ìŠˆ ì¬ê°œ: #' ||
                    'ğŸ”” ì´ìŠˆ ì—…ë°ì´íŠ¸: #' 
                  }}${{ github.event.issue.number }}",
                  
                  "description": "**ì œëª©:** ${{ github.event.issue.title }}\n**ì²˜ë¦¬ì:** ${{ github.event.sender.login }}\n\n[ì´ìŠˆ ë°”ë¡œê°€ê¸°](${{ github.event.issue.html_url }})",
                  
                  "color": ${{ 
                    # ì´ìŠˆ ìƒíƒœì— ë”°ë¥¸ ìƒ‰ìƒ ë³€ê²½ (10ì§„ìˆ˜)
                    github.event.action == 'opened'    && 16711680 || /* Red (FF0000) */
                    github.event.action == 'closed'    && 65280    || /* Green (00FF00) */
                    github.event.action == 'reopened'  && 16761088 || /* Orange (FFA500) */
                    10066329                           /* Default Blue (99AAB5) */
                  }},
                  
                  "timestamp": "${{ github.event.issue.updated_at }}"
                }
              ]
            }
